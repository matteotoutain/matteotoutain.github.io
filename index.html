<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />

  <!-- ===== SEO de base ===== -->
  <title>MaxCast â€“ PrÃ©vision TGVmax</title>
  <meta name="description" content="MaxCast estime les probabilitÃ©s dâ€™ouverture des billets TGVmax par date, gare de dÃ©part et destination. Analyse basÃ©e sur lâ€™historique des ouvertures (snapshots) et des statistiques par dÃ©lai avant dÃ©part." />
  <meta name="robots" content="index, follow" />
  <meta name="author" content="MaxCast" />

  <!-- ===== Mobile ===== -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- ===== Canonical ===== -->
  <link rel="canonical" href="https://maxcast.fr/" />

  <!-- ===== Open Graph ===== -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://maxcast.fr/" />
  <meta property="og:title" content="MaxCast â€“ PrÃ©vision dâ€™ouverture TGVmax" />
  <meta property="og:description" content="ProbabilitÃ©s dâ€™ouverture TGVmax par trajet et par date, basÃ©es sur lâ€™historique des ouvertures." />
  <meta property="og:image" content="https://maxcast.fr/og-image.png" />
  <meta property="og:locale" content="fr_FR" />

  <!-- ===== Twitter Card ===== -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="MaxCast â€“ PrÃ©vision dâ€™ouverture TGVmax" />
  <meta name="twitter:description" content="Estime les chances dâ€™ouverture TGVmax selon le trajet et la date." />
  <meta name="twitter:image" content="https://maxcast.fr/og-image.png" />

  <!-- ===== Favicons ===== -->
  <link rel="icon" href="icon.png" />
  <link rel="apple-touch-icon" href="favicon.ico" />

  <!-- ===== Styles ===== -->
  <link rel="stylesheet" href="style.css" />

  <!-- ===== JS ===== -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>

  <!-- Adsense (tu peux le laisser, mais idÃ©alement n'affiche PAS d'unitÃ©s pub tant que non validÃ©) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1113868263565203"
    crossorigin="anonymous"></script>

  <!-- Cookiebot -->
  <script id="Cookiebot" src="https://consent.cookiebot.com/uc.js"
    data-cbid="0539a839-9a9b-4914-8568-90f5d195b695"
    data-blockingmode="auto"
    type="text/javascript"></script>
</head>

<body>
  <!-- INTRO -->
  <div class="intro" id="intro">
    <div class="intro-container">
      <div class="glow"></div>
      <div class="particles" id="particles"></div>

      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000">
        <rect class="background" width="1000" height="1000" fill="rgb(254,254,254)" rx="50"/>
        <path class="main-path" d="M 304.32 444.85 C301.74,446.21 298.00,446.37 298.00,445.12 C298.00,444.01 310.77,432.63 318.00,427.31 C325.92,421.48 344.24,411.56 357.27,406.06 C414.34,381.94 502.20,372.06 554.50,383.88 C577.06,388.98 598.04,398.88 616.68,413.25 L 622.85 418.00 L 652.17 417.98 C679.04,417.97 697.18,417.02 701.36,415.42 C705.00,414.02 703.90,412.90 689.00,402.83 C642.26,371.24 589.36,345.61 550.00,335.49 C531.99,330.86 519.06,329.79 498.00,331.20 C488.30,331.85 487.75,331.79 490.76,330.45 C501.32,325.72 540.83,323.86 556.50,327.36 C584.79,333.68 614.86,347.53 654.71,372.59 C658.13,374.74 665.55,379.40 671.21,382.96 C686.08,392.29 707.61,407.69 709.97,410.69 C712.69,414.14 712.56,417.59 709.64,419.50 C706.43,421.60 695.55,423.74 683.75,424.58 C678.39,424.96 674.01,425.55 674.02,425.89 C674.02,426.22 681.22,430.55 690.00,435.50 C698.78,440.45 705.98,444.84 705.98,445.25 C705.99,445.66 690.22,446.00 670.92,446.00 L 635.85 446.00 L 633.17 443.16 C609.19,417.63 595.15,406.92 574.64,398.50 C564.26,394.24 555.13,391.79 538.55,388.82 C528.08,386.95 522.70,386.66 497.50,386.63 C472.98,386.60 465.87,386.95 451.50,388.85 C410.01,394.34 382.42,401.36 354.00,413.63 C339.34,419.95 330.23,425.39 316.50,435.98 C311.00,440.23 305.52,444.22 304.32,444.85 Z"/>
        <path class="fill-path" d="M 304.32 444.85 C301.74,446.21 298.00,446.37 298.00,445.12 C298.00,444.01 310.77,432.63 318.00,427.31 C325.92,421.48 344.24,411.56 357.27,406.06 C414.34,381.94 502.20,372.06 554.50,383.88 C577.06,388.98 598.04,398.88 616.68,413.25 L 622.85 418.00 L 652.17 417.98 C679.04,417.97 697.18,417.02 701.36,415.42 C705.00,414.02 703.90,412.90 689.00,402.83 C642.26,371.24 589.36,345.61 550.00,335.49 C531.99,330.86 519.06,329.79 498.00,331.20 C488.30,331.85 487.75,331.79 490.76,330.45 C501.32,325.72 540.83,323.86 556.50,327.36 C584.79,333.68 614.86,347.53 654.71,372.59 C658.13,374.74 665.55,379.40 671.21,382.96 C686.08,392.29 707.61,407.69 709.97,410.69 C712.69,414.14 712.56,417.59 709.64,419.50 C706.43,421.60 695.55,423.74 683.75,424.58 C678.39,424.96 674.01,425.55 674.02,425.89 C674.02,426.22 681.22,430.55 690.00,435.50 C698.78,440.45 705.98,444.84 705.98,445.25 C705.99,445.66 690.22,446.00 670.92,446.00 L 635.85 446.00 L 633.17 443.16 C609.19,417.63 595.15,406.92 574.64,398.50 C564.26,394.24 555.13,391.79 538.55,388.82 C528.08,386.95 522.70,386.66 497.50,386.63 C472.98,386.60 465.87,386.95 451.50,388.85 C410.01,394.34 382.42,401.36 354.00,413.63 C339.34,419.95 330.23,425.39 316.50,435.98 C311.00,440.23 305.52,444.22 304.32,444.85 Z"/>
      </svg>

      <div class="text-reveal">Made with â¤ï¸ in Centrale MÃ©diterranÃ©e</div>
    </div>
  </div>

  <!-- PAGE -->
  <div class="page-content" id="page">
    <div class="page">

      <!-- HERO -->
      <div id="site-header"></div>

      <!-- EDITORIAL (pour AdSense + SEO) -->

      <!-- MAIN -->
      <main class="content">

        <!-- PARAMS -->
        <section class="panel">
          <h2 class="panel__title">ParamÃ¨tres du trajet</h2>

          <div class="form">
            <div class="field">
              <label for="origin-select">Gare de dÃ©part</label>
              <div class="control">
                <select id="origin-select">
                  <option value="">â€” SÃ©lectionnez une gare â€”</option>
                </select>
              </div>
            </div>

            <div class="switch-wrap" aria-hidden="false">
              <button id="swap-btn" type="button" class="swap-btn" title="Inverser dÃ©part / arrivÃ©e" aria-label="Inverser dÃ©part et arrivÃ©e">
                â‡„
              </button>
            </div>

            <div class="field">
              <label for="destination-select">Gare dâ€™arrivÃ©e</label>
              <div class="control">
                <select id="destination-select">
                  <option value="">â€” SÃ©lectionnez une gare â€”</option>
                </select>
              </div>
            </div>

            <div class="field field--full">
              <div class="label-row">
                <label for="date-select">Date de dÃ©part souhaitÃ©e</label>
                <span class="help" title="La prÃ©diction dÃ©pend du nombre de jours avant le dÃ©part.">?</span>
              </div>
              <div class="control">
                <input type="date" id="date-select" />
              </div>
            </div>

            <p class="form__hint">
              MaxCast utilise la distribution historique de disponibilitÃ© en fonction du <strong>delta jours</strong>.
              Quand câ€™est possible, la prÃ©vision est spÃ©cifique Ã  ton trajet (origine/destination) ; sinon, elle retombe sur une
              statistique globale. Si les donnÃ©es le permettent, lâ€™Ã©tat rÃ©el du trajet dans le snapshot dâ€™aujourdâ€™hui est aussi affichÃ©.
            </p>

            <button id="compute-btn" class="btn">
              <span class="btn__icon">ğŸ”®</span>
              <span>Lancer la prÃ©vision</span>
            </button>
          </div>
        </section>

        <!-- RESULTS -->
        <section class="panel">
          <div class="results__header">
            <h2 class="panel__title">RÃ©sultat</h2>

            <div id="today-badge" class="badge badge--unknown">
              Snapshot du jour : statut inconnu
            </div>
          </div>

          <div id="result-status" class="status status--neutral">
            En attente dâ€™un trajetâ€¦
          </div>

          <div class="kpis">
            <div class="kpi">
              <div class="kpi__label">ProbabilitÃ© trajet</div>
              <div id="probability-value" class="kpi__value">â€”</div>
            </div>

            <div class="kpi">
              <div class="kpi__label">ProbabilitÃ© globale (fallback)</div>
              <div id="probability-global-value" class="kpi__value">â€”</div>
            </div>

            <div class="kpi">
              <div class="kpi__label">Delta jours (date âˆ’ aujourdâ€™hui)</div>
              <div id="delta-value" class="kpi__value">â€”</div>
            </div>
          </div>

          <div id="warning-box" class="callout callout--warn hidden"></div>

          <div class="chart">
            <div class="chart__title">Courbe de probabilitÃ© (trajet)</div>
            <div class="chart__box">
              <canvas id="prob-chart"></canvas>
            </div>
          </div>
        </section>

        <section class="panel panel--soft">
        <h2 class="panel__title">Comprendre la prÃ©diction (en 2 minutes)</h2>

        <p class="form__hint" style="margin-top:0;">
          Les billets TGVmax sâ€™ouvrent par vagues. Le mÃªme trajet peut Ãªtre indisponible pendant des jours,
          puis apparaÃ®tre dâ€™un coup, parfois Ã  des dÃ©lais similaires avant le dÃ©part. MaxCast ne â€œdevineâ€ pas SNCF :
          il mesure des tendances dans lâ€™historique et te donne une estimation probabiliste.<br>
        </p>

        <div class="grid-2">
          <div class="panel" style="box-shadow:none;">
            <h3 style="margin:0 0 10px; font-size:18px; letter-spacing:-0.02em;">Ce que MaxCast calcule</h3>
            <ul class="bullets">
              <li><strong>Une probabilitÃ© liÃ©e au dÃ©lai</strong> : en fonction du nombre de jours entre aujourdâ€™hui et ta date de dÃ©part.</li>
              <li><strong>Une probabilitÃ© â€œtrajetâ€</strong> quand il y a assez de donnÃ©es pour ton origine/destination.</li>
              <li><strong>Un fallback global</strong> si le trajet est rare ou peu observÃ© dans lâ€™historique.</li>
              <li><strong>Le statut du snapshot du jour</strong> (si disponible) : ouvert / fermÃ© aujourdâ€™hui pour ce couple origine-destination et cette date.</li>
            </ul>
          </div>

          <div class="panel" style="box-shadow:none;">
            <h3 style="margin:0 0 10px; font-size:18px; letter-spacing:-0.02em;">Ce que MaxCast ne fait pas</h3>
            <ul class="bullets">
              <li>Ce nâ€™est <strong>pas</strong> une garantie dâ€™ouverture (mÃªme Ã  90%).</li>
              <li>Ce nâ€™est <strong>pas</strong> une source officielle SNCF, et le service peut Ã©voluer.</li>
              <li>Les rÃ©sultats peuvent Ãªtre moins fiables sur les trajets peu frÃ©quents, ou lors de pÃ©riodes atypiques (travaux, grÃ¨ves, pics).</li>
            </ul>
          </div>
        </div>

        <p class="form__hint" style="margin-bottom:0;">
          Conseil pragmatique : si tu vois une probabilitÃ© qui monte Ã  un certain dÃ©lai, surveille cette fenÃªtre,
          et garde une alternative (OUIGO, TER, autre date) si ton trajet est critique.
        </p>
      </section>

        <!-- MINI FAQ (bonus qualitÃ©/AdSense) -->
        <section class="panel panel--soft">
          <h2 class="panel__title">Questions frÃ©quentes</h2>

          <div class="grid-2">
            <div class="panel" style="box-shadow:none;">
              <h3 style="margin:0 0 10px; font-size:18px; letter-spacing:-0.02em;">Pourquoi â€œtrajet introuvableâ€ parfois ?</h3>
              <p class="form__hint" style="margin:0;">
                Certaines combinaisons origine/destination ne correspondent pas Ã  un trajet rÃ©el TGVmax (ou sont trop rares dans lâ€™historique).
                Dans ce cas, MaxCast tâ€™avertit et peut utiliser un fallback global si pertinent.
              </p>
            </div>

            <div class="panel" style="box-shadow:none;">
              <h3 style="margin:0 0 10px; font-size:18px; letter-spacing:-0.02em;">Ã€ quelle frÃ©quence câ€™est mis Ã  jour ?</h3>
              <p class="form__hint" style="margin:0;">
                Le site sâ€™appuie sur des snapshots historiques. Les statistiques sont recalculÃ©es pÃ©riodiquement.
                La ligne â€œmÃ©tadonnÃ©esâ€ en haut te donne la date du dernier calcul.
              </p>
            </div>

            <div class="panel" style="box-shadow:none;">
              <h3 style="margin:0 0 10px; font-size:18px; letter-spacing:-0.02em;">Est-ce que MaxCast stocke mes donnÃ©es ?</h3>
              <p class="form__hint" style="margin:0;">
                Non : la sÃ©lection dâ€™une gare et dâ€™une date sert uniquement Ã  calculer une prÃ©diction cÃ´tÃ© navigateur.
                Pour les cookies (intro + consentement), consulte la page mentions lÃ©gales.
              </p>
            </div>

            <div class="panel" style="box-shadow:none;">
              <h3 style="margin:0 0 10px; font-size:18px; letter-spacing:-0.02em;">Qui est derriÃ¨re MaxCast ?</h3>
              <p class="form__hint" style="margin:0;">
                Projet Ã©tudiant / perso dÃ©veloppÃ© Ã  Centrale MÃ©diterranÃ©e.
                Le site nâ€™est pas affiliÃ© Ã  la SNCF.
              </p>
            </div>
          </div>
        </section>

      </main>

      <div id="site-footer"></div>

    </div>
  </div>

  <script src="app.js"></script>
  <script src="common.js"></script>

  <script>
  const INTRO_COOKIE = "intro_seen";
  const INTRO_TOTAL_MS = 6500;

  function hasSeenIntro() {
    return document.cookie
      .split(";")
      .map(c => c.trim())
      .some(c => c.startsWith(INTRO_COOKIE + "="));
  }

  function setIntroSeen() {
    const maxAge = 60 * 60; // 1 heure
    document.cookie = `${INTRO_COOKIE}=true; max-age=${maxAge}; path=/; SameSite=Lax`;
  }

  document.addEventListener("DOMContentLoaded", () => {
    const intro = document.getElementById("intro");
    const particles = document.getElementById("particles");
    const showPageNow = () => document.body.classList.add("loaded");

    if (!intro) { showPageNow(); return; }

    if (hasSeenIntro()) {
      intro.style.display = "none";
      showPageNow();
      return;
    }

    setIntroSeen();

    let particleTimer = null;
    if (particles) {
      const spawnParticle = () => {
        const p = document.createElement("div");
        p.className = "particle";
        p.style.left = (Math.random() * 100) + "%";
        p.style.top = (60 + Math.random() * 30) + "%";
        particles.appendChild(p);
        setTimeout(() => p.remove(), 2000);
      };
      particleTimer = setInterval(spawnParticle, 120);
    }

    setTimeout(() => {
      intro.classList.add("is-outro");
      showPageNow();

      if (particleTimer) clearInterval(particleTimer);

      setTimeout(() => { intro.remove(); }, 1200);
    }, INTRO_TOTAL_MS);
  });

  document.getElementById("year").textContent = new Date().getFullYear();
</script>
</body>
</html>
